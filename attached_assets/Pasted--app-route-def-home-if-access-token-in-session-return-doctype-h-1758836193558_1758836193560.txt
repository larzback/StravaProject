@app.route("/")
def home():
    if "access_token" in session:
        return '''
        <!doctype html>
        <html lang="fr">
        <head>
          <meta charset="utf-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <title>Strava â€“ ConnectÃ©</title>
          <style>
            :root {
              --bg1:#0f172a; --bg2:#1e293b; --card:#0b1220; --text:#e5e7eb; --muted:#94a3b8; --accent:#f97316;
              --btn:#f97316; --btnH:#ea580c; --ring:#fb923c;
            }
            *{box-sizing:border-box} html,body{height:100%}
            body{
              margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
              color:var(--text); background:radial-gradient(90vw 90vh at 80% -10%, #1f2937 0, transparent 60%),
                                 radial-gradient(70vw 70vh at -10% 110%, #1f2937 0, transparent 60%),
                                 linear-gradient(160deg, var(--bg1), var(--bg2));
              display:grid; place-items:center; padding:24px;
            }
            .card{
              width:min(680px, 92vw); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
              border:1px solid rgba(148,163,184,.18); border-radius:20px; padding:28px 26px;
              box-shadow:0 10px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
              backdrop-filter: blur(6px);
            }
            .title{font-size:28px; font-weight:700; letter-spacing:.2px; margin:0 0 6px}
            .subtitle{color:var(--muted); margin:0 0 22px; line-height:1.5}
            .row{display:flex; gap:10px; flex-wrap:wrap; margin:16px 0 6px}
            .pill{font-size:12px; color:#e2e8f0; background:#0f172a; border:1px solid rgba(148,163,184,.18);
                  padding:8px 12px; border-radius:999px}
            .btn{
              appearance:none; border:0; border-radius:12px; padding:14px 18px; font-weight:700; font-size:15px;
              background:linear-gradient(180deg, var(--btn), var(--btnH)); color:white; cursor:pointer;
              box-shadow:0 8px 24px rgba(249,115,22,.35); transition:transform .05s ease, box-shadow .2s ease;
            }
            .btn:hover{box-shadow:0 10px 32px rgba(249,115,22,.5)}
            .btn:active{transform:translateY(1px)}
            .links{display:flex; gap:14px; margin-top:18px; flex-wrap:wrap}
            .a{color:#93c5fd; text-decoration:none; font-weight:600}
            .a:hover{text-decoration:underline}
            .ok{display:inline-flex; align-items:center; gap:8px; margin:10px 0 0; color:#86efac; font-weight:600}
          </style>
        </head>
        <body>
          <main class="card">
            <h1 class="title">Bienvenue sur le premier projet de Lara ðŸš€</h1>
            <p class="subtitle">
              Petite app perso pour se connecter Ã  Strava et afficher rapidement les derniÃ¨res activitÃ©s
              (distance, D+, etc.). Clique pour connecter ton compte puis explore.
            </p>

            <div class="row">
              <span class="pill">Flask</span>
              <span class="pill">Strava API</span>
              <span class="pill">OAuth2</span>
              <span class="pill">Demo privÃ©e</span>
            </div>

            <form action="/connect" method="get" style="margin-top:20px">
              <button class="btn" type="submit">ðŸš´ Se connecter avec Strava</button>
            </form>

            <div class="links">
              <a class="a" href="/me">Voir mon profil</a>
              <a class="a" href="/activities">DerniÃ¨res activitÃ©s</a>
              <a class="a" href="/logout">Se dÃ©connecter</a>
            </div>

            <div class="ok">âœ“ Auth en session locale, rien nâ€™est stockÃ© cÃ´tÃ© serveur</div>
          </main>
        </body>
        </html>
        '''
    # Non connectÃ©
    return '''
    <!doctype html>
    <html lang="fr">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>Projet Strava â€“ Lara</title>
      <style>
        :root {
          --bg1:#0f172a; --bg2:#1e293b; --card:#0b1220; --text:#e5e7eb; --muted:#94a3b8; --accent:#f97316;
          --btn:#f97316; --btnH:#ea580c; --ring:#fb923c;
        }
        *{box-sizing:border-box} html,body{height:100%}
        body{
          margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
          color:var(--text); background:radial-gradient(90vw 90vh at 80% -10%, #1f2937 0, transparent 60%),
                             radial-gradient(70vw 70vh at -10% 110%, #1f2937 0, transparent 60%),
                             linear-gradient(160deg, var(--bg1), var(--bg2));
          display:grid; place-items:center; padding:24px;
        }
        .card{
          width:min(680px, 92vw); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
          border:1px solid rgba(148,163,184,.18); border-radius:20px; padding:28px 26px;
          box-shadow:0 10px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
          backdrop-filter: blur(6px);
        }
        .title{font-size:30px; font-weight:800; letter-spacing:.3px; margin:0 0 8px}
        .subtitle{color:var(--muted); margin:0 0 22px; line-height:1.55}
        .row{display:flex; gap:10px; flex-wrap:wrap; margin:16px 0 6px}
        .pill{font-size:12px; color:#e2e8f0; background:#0f172a; border:1px solid rgba(148,163,184,.18);
              padding:8px 12px; border-radius:999px}
        .btn{
          appearance:none; border:0; border-radius:12px; padding:14px 18px; font-weight:800; font-size:15px;
          background:linear-gradient(180deg, var(--btn), var(--btnH)); color:white; cursor:pointer;
          box-shadow:0 8px 24px rgba(249,115,22,.35); transition:transform .05s ease, box-shadow .2s ease;
        }
        .btn:hover{box-shadow:0 10px 32px rgba(249,115,22,.5)}
        .btn:active{transform:translateY(1px)}
        .foot{color:var(--muted); font-size:12px; margin-top:14px}
      </style>
    </head>
    <body>
      <main class="card">
        <h1 class="title">Bienvenue sur le premier projet de Lara ðŸš€</h1>
        <p class="subtitle">
          Connecte ton compte Strava pour afficher un miniâ€‘dashboard de tes derniÃ¨res activitÃ©s.
          Rien dâ€™exotique : juste un POC propre et rapide.
        </p>

        <div class="row">
          <span class="pill">Flask</span>
          <span class="pill">Strava API</span>
          <span class="pill">OAuth2</span>
          <span class="pill">UI minimaliste</span>
        </div>

        <form action="/connect" method="get" style="margin-top:20px">
          <button class="btn" type="submit">ðŸš´ Se connecter avec Strava</button>
        </form>

        <p class="foot">AstuceÂ : tu peux ouvrir <b>/me</b> ou <b>/activities</b> aprÃ¨s connexion.</p>
      </main>
    </body>
    </html>
    '''